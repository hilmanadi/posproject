<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Point of Sales</title>
    <script src="./assets/js/vue.global.js"></script>
    <link rel="stylesheet" href="./assets/css/bulma.min.css">
</head>
<body>
    <div id="maincontent">
        <nav class="navbar has-background-info-light" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <a class="navbar-item has-text-weight-bold">
                    {{navbarTitle}}
                </a>
        
                <a role="button" class="navbar-burger " aria-label="menu" aria-expanded="false" data-target="navbarBasicExample"  @click="isActive=!isActive">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </a>
            </div>
        
            <div id="navbarBasicExample" class="navbar-menu has-background-info-light-ter" :class="{'is-active':isActive}">
                <div class="navbar-start">
                    <a class="navbar-item" v-for="items in navbarItems" @click="getMenu(items.action.click)">
                        {{items.menu}}
                    </a>
            </div>
        </nav>
        <div id="main" class="p-2">

        </div>
    </div>  

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    message : 'testing',
                    navbarTitle : 'POS',
                    navbarItems : [{"menu":"Input","action":{"click":"input"}},{"menu":"Cari","action":{"click":"cari"}},{"menu":"Penjualan","action":{"click":"penjualan"}}],
                    isActive : false,
                }
            },
            methods: {
                getMenu : async function(x) {
                    await fetch('./modules/views/'+x+'.html')
                    .then((response) => {
                        return response.text()
                    })
                    .then((resp)=>{
                        document.querySelector('#main').innerHTML = resp;
                        var scripts = Array.prototype.slice.call(document.getElementById('main').getElementsByTagName("script"));
                        for (var i = 0; i < scripts.length; i++) {
                            if (scripts[i].src != "") {
                                var tag = document.createElement("script");
                                tag.src = scripts[i].src;
                                document.getElementsByTagName("head")[0].appendChild(tag);
                                this.isActive = false;
                            }
                            else {
                                eval(scripts[i].innerHTML);
                                this.isActive = false;
                            }
                        }
                    })
                },
            },
            mounted() {
                
            },
        }).mount('#maincontent')
    </script>
</body>
</html>